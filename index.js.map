{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\nconst API_KEY = \"46865368-ded5de9c0791206e82b93b274\";\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\n\nconst fetchImages = async (query, page = 1, per_page = 15) => {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page,\n                page\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.log(\"Error fetching images:\", error);\n        throw error;\n    }\n};\n      \n      export { fetchImages };\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector('.gallery');\n\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    animationSpeed: 300,\n    overlay: true,\n    overlayOpacity: 0.5,\n  });\n\nfunction renderImages(images) {\n//   \n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n       return `<li class=\"gallery-item\">\n//     <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//       <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\"  />\n//       <div class=\"gallery-img-info\">\n//          <p class=\"info-item-title\"><b>Likes</b>${likes}</p>\n//           <p class=\"info-item-title\"><b>Views</b>${views}</p>\n//           <p class=\"info-item-title\"><b>Comments</b>${comments}</p>\n//           <p class=\"info-item-title\"><b>Downloads</b>${downloads}</p>\n         \n//         </div>\n//     </a>\n//   </li>`;\n      })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  \n    lightbox.refresh();\n  \n}\n  export {renderImages};","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('.text-input');\nconst loaderContainer = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet query = '';\nlet page = 1;\nlet per_page = 15;\n\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n\n  query = event.currentTarget.elements.input.value;\n  if (query.trim() === '') {\n    iziToast.warning({\n      title: 'Missing tags',\n      message: 'Please enter a search query!',\n      closeOnClick: true,\n    });\n    return;\n  }\n  page = 1;\n  loadMoreBtn.style.display = 'none';\n  loaderContainer.style.display = 'block';\n\n  try {\n    const data = await fetchImages(query, page, per_page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'No pictures found',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        timeout: 2500,\n        closeOnClick: true,\n      });\n    } else {\n      renderImages(data.hits);\n\n      if (data.totalHits > per_page * page) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        iziToast.show({\n          class: 'toast',\n          position: 'topRight',\n          messageColor: 'white',\n          message: `We're sorry, but you've reached the end of search results.`,\n        });\n      }\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      timeout: 2500,\n      closeOnClick: true,\n    });\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n  form.reset();\n}\n\nasync function onLoadMore() {\n  loaderContainer.style.display = 'block';\n  page += 1;\n  try {\n    const data = await fetchImages(query, page, per_page);\n    renderImages(data.hits);\n    console.log(gallery.lastElementChild);\n\n    const cardSize = gallery.lastElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardSize.top + cardSize.height * 1.5,\n      behavior: 'smooth',\n    });\n\n    if (data.totalHits > per_page * page) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        class: 'toast',\n        position: 'topRight',\n        messageColor: 'white',\n        message: `We are sorry, there are no more posts to load`,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      timeout: 2500,\n      closeOnClick: true,\n    });\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n}\n\n// form.addEventListener('submit', async (event) => {\n//     event.preventDefault();\n//      query = event.currentTarget.elements.searchQuery.value.trim();\n\n//     if(!query) {\n//         iziToast.error({ \n//         title: 'Warning',\n//         message: 'Please enter a search query!',\n//         position: 'topRight'\n//       });\n//       return;\n//     }\n\n//     page = 1;\n//     gallery.innerHTML = '';\n//     loadMoreBtn.style.display = 'none';\n//     fetchRenderImages();\n// });\n\n// const fetchRenderImages = async () => {\n//     try {\n//         loader.style.display = 'block';\n//         const data = await fetchImages (query, page, per_page);\n//         loader.style.display = 'none';\n\n//         if(data.hits.length === 0) {\n//             iziToast.error({\n//                 message: 'Sorry, there are no images matching your search query. Please try again!'\n//             });\n//             loadMoreBtn.style.display = 'none';\n//             return;\n//         } \n//         renderImages(data.hits);\n//         page += 1;\n\n//     if (data.hits.length < per_page || page > Math.ceil(data.totalHits / per_page)) {\n//         loadMoreBtn.style.display = 'none';\n//         iziToast.error({\n//             position: \"topRight\",\n//             message: \"We are sorry, there are no more posts to load\"\n//         })\n//     } else {\n//         loadMoreBtn.style.display = 'block';\n//     }\n//     } catch (error) {\n//         loadMoreBtn.style.display = 'none';\n//         iziToast.error({title: 'Error', message: error.message});\n//     }\n// };\n\n// loadMoreBtn.addEventListener('click', async () => {\n//     await fetchRenderImages();\n//     const galleryRect = document.querySelector('.gallery').lastElementChild.getBoundingClientRect();\n//     window.scrollBy({\n//         top: galleryRect.height * 2,\n//         behavior: 'smooth'\n//     });\n// });\n\n// const showMessage = (type, title, message) => {\n//     iziToast[type]({\n//       title,\n//       message,\n//       timeout: 2500,\n//       progressBar: false,\n//       position: 'center'\n//     });\n//   };\n  \n//   const errorMessage = (message, title = '') => {\n//     showMessage('error', title, message);\n//   };\n  \n//   const successMessage = (message, title = '') => {\n//     showMessage('success', title, message);\n//   };\n\n// function showLoader() {\n//     loaderContainer.style.display = 'flex';\n//   }\n  \n//   function hideLoader() {\n//     loaderContainer.style.display = 'none';\n//   }\n\n\n\n//   showLoader();\n//     fetchImages(query)\n//     .then(images => {\n//         renderImages(gallery, images);\n//         hideLoader();\n//       })\n//       .catch((error) => {\n//         errorMessage(error.message);\n//         hideLoader();\n//         gallery.innerHTML = '';\n        \n//       });\n\n   "],"names":["API_KEY","BASE_URL","fetchImages","query","page","per_page","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loaderContainer","loadMoreBtn","onSubmit","onLoadMore","event","iziToast","data","cardSize"],"mappings":"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"}